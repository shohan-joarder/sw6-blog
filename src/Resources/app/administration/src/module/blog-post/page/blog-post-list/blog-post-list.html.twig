{% block blog_post_list %}

<sw-page class="blog-post-list">

    {% block blog_post_list_smart_bar_actions %}
        <template #smart-bar-actions>
            <sw-button
                variant="primary"
                :routerLink="{ name: 'blog.post.create' }"
                > {{ $tc('global.default.new') }}
            </sw-button>
        </template>
    {% endblock %}

    <template #content>

        <div class="item_row">

            <div class="side_nav">
                <ul>
                    <li><a class="activeLink" href="#/blog/post/list">Blog</a></li>
                    <li><a class="link" href="#/blog/author/list">Autor</a></li>
                    <li><a class="link" href="#/blog/category/list">Category</a></li>
                </ul>
            </div>

            <div class="col-10">
                <sw-grid 
                    :items="items" 
                    :showSelection="false"
                    :columns="columns"
                    >
                    <!-- Define columns slot -->
                    <template #columns="{ item }">
                        <sw-grid-column flex="minmax(200px, 1fr)" label="Title">
                            <strong>{{ item.title }}</strong>
                        </sw-grid-column>

                        <sw-grid-column flex="minmax(100px, 1fr)" label="Author">
                            {{ item.postAuthor.name }}
                        </sw-grid-column>

                        <sw-grid-column flex="minmax(50px, 1fr)" label="Published">
                            {{ new Date(item.publishedAt).toLocaleDateString('en-GB', { year: 'numeric', month: 'short', day: '2-digit' }) }}
                        </sw-grid-column>

                        <!-- Action Column -->
                        <sw-grid-column label="Actions" flex="100px">
                            <sw-context-button>
                                <sw-context-menu-item @click="onEditItem(item)">Edit</sw-context-menu-item>
                                <sw-context-menu-item @click="postId = item.id; confirmModal = !confirmModal">Delete</sw-context-menu-item>
                            </sw-context-button>
                        </sw-grid-column>
                    </template>
                </sw-grid>
            
                 <!-- Pagination Controls -->
                <sw-pagination
                    :currentPage="page"
                    :total="total"
                    :limit="limit"
                    @page-change="onPageChange"
                />

            </div>

        </div>

    </template>



</sw-page>

<sw-confirm-modal
    v-if="confirmModal"
    class="sw-my-component__confirm-delete-modal"
    type="delete"
    :text="'Are you sure you want to delete this?'"
    @confirm="onDeleteItem()"
    @close="confirmModal = !confirmModal"
    @cancel="confirmModal = !confirmModal">
</sw-confirm-modal>

{% endblock %}